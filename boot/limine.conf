# =============================================================================
# MinimalOS NextGen — Limine Bootloader Configuration
# =============================================================================
#
# Limine is a modern, feature-rich bootloader for x86_64 UEFI and BIOS.
# It handles the complex early boot process:
#   1. UEFI firmware loads Limine from the EFI System Partition
#   2. Limine sets up 64-bit long mode with paging enabled
#   3. Limine reads this config to find the kernel binary
#   4. Limine loads the kernel ELF and maps it at the higher half
#   5. Limine provides boot info (memory map, framebuffer, etc.)
#   6. Limine jumps to the kernel entry point
#
# We use the Limine Boot Protocol (not Multiboot) because it:
#   - Natively supports 64-bit entry (no 32-bit trampoline needed)
#   - Provides a higher-half direct map (HHDM) of all physical memory
#   - Gives us a working framebuffer from UEFI GOP
#   - Passes ACPI tables location
#   - Can load additional boot modules (our initramfs)
#
# File: boot/limine.conf
# This file goes on the boot partition alongside the Limine binaries.
# =============================================================================

# Timeout in seconds before auto-booting the default entry.
# Set to 3 for development — gives time to see the boot menu.
# Set to 0 for production — boots immediately.
timeout: 0

# Default entry to boot
default_entry: 1

# =============================================================================
# MinimalOS NextGen kernel entry
# =============================================================================
/MinimalOS NextGen
    # Use the Limine boot protocol (not multiboot, not linux)
    protocol: limine

    # Path to the kernel binary on the boot partition
    # The `boot()` prefix refers to the boot partition itself
    kernel_path: boot():/boot/minimalos-kernel

    # ==========================================================================
    # Boot modules — loaded into memory and passed to the kernel
    # ==========================================================================
    # The initramfs is a tar archive containing the init process and
    # initial userspace programs. The kernel unpacks it from memory.
    #
    # Format: module_path: <path>
    # Multiple modules can be specified.
    # Uncomment when we have an initramfs:
    # module_path: boot():/boot/initramfs.tar
